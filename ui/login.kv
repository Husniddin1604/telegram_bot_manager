<LoginScreen>:
    name: "login"

    FloatLayout:
        # Белый фон
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Логотип Telegram-бота
        Image:
            source: "assets/bot_icon.png"
            size_hint: None, None
            size: dp(96), dp(96)
            pos_hint: {"center_x": 0.5, "top": 0.88}
            allow_stretch: True
            keep_ratio: True

        # Заголовок
        Label:
            text: "Подключение Telegram-бота"
            font_size: "24sp"
            bold: True
            color: 0.1, 0.1, 0.1, 1
            size_hint: 0.85, None
            height: "60dp"
            pos_hint: {"center_x": 0.5}
            y: root.height - dp(96) -dp(80) - self.height
            halign: "center"
            text_size: self.width, None

        # Поле ввода токена
        TextInput:
            id: token_input
            hint_text: "Введите API-токен из @BotFather"
            multiline: False
            font_size: "16sp"
            size_hint: 0.85, None
            height: "50dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.53}
            padding: [15, 12]
            background_color: 1, 1, 1, 1
            foreground_color: 0.1, 0.1, 0.1, 1
            hint_text_color: 0.6, 0.6, 0.6, 1
            background_normal: ""
            background_active: ""
            canvas.before:
                Color:
                    rgba: 0.85, 0.85, 0.85, 1
                Line:
                    width: 1.2
                    rounded_rectangle: self.x, self.y, self.width, self.height, 10

        # Ссылка на BotFather
        Button:
            text: "Получите токен у @BotFather"
            font_size: "14sp"
            bold: True
            color: 0.15, 0.45, 0.85, 1
            background_color: 0, 0, 0, 0
            size_hint: 0.85, None
            height: "30dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.43}
            on_release: root.open_botfather()

        # Список ранее использованных ботов
        BoxLayout:
            orientation: "vertical"
            size_hint: 0.85, None
            height: "125dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.27}
            spacing: "6dp"

            Label:
                text: "Список использованных ботов:"
                font_size: "14sp"
                color: 0.35, 0.35, 0.35, 1
                size_hint_y: None
                height: "22dp"

            Spinner:
                id: bots_spinner
                text: "Нет сохранённых ботов"
                values: []
                size_hint_y: None
                height: "40dp"
                disabled: True

            Button:
                id: use_existing_btn
                text: "Использовать выбранного бота"
                font_size: "14sp"
                bold: True
                size_hint_y: None
                height: "40dp"
                background_color: 0.4, 0.6, 0.8, 1
                background_normal: ""
                disabled: True
                on_release: root.use_existing_bot()

        # Кнопка проверки токена
        Button:
            id: login_btn
            text: "Проверить токен"
            font_size: "17sp"
            bold: True
            color: 1, 1, 1, 1
            background_color: 0.1, 0.55, 0.95, 1
            background_normal: ""
            size_hint: 0.85, None
            height: "52dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.12}
            on_release: root.authenticate(token_input.text)

        # Статус (ошибки / успех)
        Label:
            id: status
            text: ""
            markup: True
            font_size: "14sp"
            color: 0.2, 0.2, 0.2, 1
            size_hint: 0.9, None
            height: "40dp"
            pos_hint: {"center_x": 0.5, "y": 0.01}
            halign: "center"
            text_size: self.width, None
